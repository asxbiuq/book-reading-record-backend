import{I as u,B as c,J as i,K as h,p as o,h as l,L as p}from"./index.95a673a1.js";import{a as f}from"./assign.87b377eb.js";const v=u({baseUrl:"https://my-32541.herokuapp.com/",options:{immediate:!0,timeout:3e4,async beforeFetch({options:e}){var a;const t=c();if(!t.value.token)throw new Error(`Error happened in useFetch, token is ${(a=t.value.token)!=null?a:null}, baseUrl is https://my-32541.herokuapp.com/`);return e.headers.Authorization=`Bearer ${t.value.token}`,{options:e}},async afterFetch({data:e,response:t}){if(t.status!==200){const a=await e.json();throw new Error("Failed to fetch dates. "+a.message)}return{data:e,response:t}},async onFetchError({data:e,error:t}){return{data:e,error:t}}}}),_=i("favs",()=>{const e=h();o(e,"deletePost");const t=o(e,"UpdatePost"),a=l([]);return{gets:async(s=1)=>{const r=await v(`fav/${s}`).json();o(r,"error");const n=o(r,"data");if(n.value.posts.length)f(a.value,n.value.posts);else throw new Error("\u6CA1\u6709\u66F4\u591A\u7684\u6570\u636E\u4E86!")},favs:a,unfav:async s=>{await t.value(s),p(a.value,r=>r._id===s._id)}}});export{_ as u};
